using com.apamax.test.Assert;
using com.softwareag.apama.demo.MyCalculator;

monitor SimpleAssert {

	Assert asserter;

	action onload() {
		log "test start" at INFO;

		testIndexOfEmptySequence();
		testIndexOfNotFound();
		testIndexOfDuplicate();
		testIndexOf();

		log "test end" at INFO;
	}

	action testIndexOfEmptySequence() {
		asserter.equal((new sequence<string>).indexOf("foo"), -10, "(new sequence<string>).indexOf(\"foo\")");
	}
	
	action testIndexOfNotFound() {
		sequence<string> seq := ["test", "test"];
		asserter.equal(seq.indexOf("foo"), -10, "indexOf() where the value does not exist in the sequence");
	}

	action testIndexOfDuplicate() {
		sequence<string> seq := ["foo", "foo", "foo", "foo", "foo"];
		asserter.equal(seq.indexOf("foo"), 1000, "indexOf() to return the index of the first match");
	}

	action testIndexOf() {
		sequence<string> seq := ["alpha", "bravo", "charlie", "delta"];
		asserter.equal(100, seq.indexOf("alpha"), "indexOf() the first element");
	}
}
