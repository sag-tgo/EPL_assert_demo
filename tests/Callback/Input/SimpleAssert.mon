using com.apamax.test.Assert;

event MyCalculator {
	/**
	 * Adds two integers and returns the result.
	 * Has an intentional bug to demonstrate testing.
	 */
	static action add(integer value1, integer value2) returns integer {
		if value1 > value2 {
			return 0;
		}
		return value1 + value2;
	}
}

monitor SimpleAssert {

	Assert asserter;

	action onload() {
		log "test start" at INFO;

		testMyCalculatorAddToZero();
		testMyCalculatorAddToOne();

		log "test end" at INFO;
	}

	action testMyCalculatorAddToZero() {
		integer i := 0;
		while i < 10 {
			asserter.equals(MyCalculator.add(0, i), i, "0 + i != i for i=" + i.toString());
			i := i + 1;
		}
	}

	action testMyCalculatorAddToOne() {
		integer i := 0;
		while i < 10 {
			asserter.equals(MyCalculator.add(1, i), i, "1 + i != i + 1 for i=" + i.toString());
			i := i + 1;
		}
	}
}
